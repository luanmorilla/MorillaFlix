<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Entrar | MorillaFlix</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      height:100vh;overflow:hidden;display:flex;justify-content:center;align-items:center;
      font-family:'Poppins',sans-serif;color:#fff;background:#000;position:relative;
    }
    /* ===== BACKGROUND ANIMADO ===== */
    canvas#bg{
      position:fixed;inset:0;width:100%;height:100%;
      z-index:-3;
    }
    body::before{
      content:"";position:absolute;inset:0;
      background:url('https://image.tmdb.org/t/p/original/3jcbDmRFiQ83drXNOvRDeKHxS0C.jpg') center/cover no-repeat;
      filter:blur(20px) brightness(0.25);
      transform:scale(1.2);
      z-index:-2;
    }
    body::after{
      content:"";position:absolute;inset:0;
      background:linear-gradient(to bottom right,rgba(0,0,0,0.85),rgba(229,9,20,0.25));
      z-index:-1;
    }

    /* ===== CONTAINER ===== */
    .login-container{
      width:min(420px,90%);
      background:rgba(20,20,20,0.9);
      backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,0.05);
      border-radius:20px;
      padding:40px 30px;
      box-shadow:0 0 40px rgba(229,9,20,0.35);
      position:relative;
      animation:fadeIn 1.2s ease;
    }

    /* ===== LOGO ===== */
    .logo{
      font-family:'Bebas Neue',cursive;
      letter-spacing:4px;
      font-size:2.6rem;
      text-align:center;
      margin-bottom:25px;
      background:linear-gradient(90deg,#e50914,#ff4040);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      text-shadow:0 0 30px rgba(229,9,20,0.4);
      animation:glow 3s ease-in-out infinite;
    }

    /* ===== INPUTS ===== */
    .input-group{margin-bottom:18px;position:relative;}
    input{
      width:100%;padding:12px 14px 12px 42px;
      border:none;border-radius:10px;
      background:#0a0a0a;color:#fff;font-size:0.95rem;
      border:1px solid rgba(255,255,255,0.1);
      transition:0.3s;
    }
    input:focus{
      border-color:#e50914;outline:none;
      box-shadow:0 0 10px rgba(229,9,20,0.4);
    }
    .input-icon{position:absolute;left:14px;top:50%;transform:translateY(-50%);opacity:0.6;}

    /* ===== BOT√ïES ===== */
    button{
      width:100%;padding:13px;
      border:none;border-radius:30px;
      font-weight:700;cursor:pointer;
      transition:all .3s ease;font-size:1rem;
    }
    #signin{
      background:linear-gradient(90deg,#e50914,#ff4c4c);
      color:#fff;box-shadow:0 0 20px rgba(229,9,20,0.4);
    }
    #signin:hover{transform:scale(1.05);}
    #signup{
      margin-top:10px;background:#1a1a1a;
      border:1px solid #e50914;color:#fff;
    }
    #signup:hover{background:#e50914;}
    .google-btn{
      margin-top:14px;background:#fff;color:#000;
      display:flex;align-items:center;justify-content:center;
      gap:10px;font-weight:600;border-radius:30px;
    }
    .google-btn img{width:20px;height:20px;}
    .google-btn:hover{filter:brightness(0.9);}
    p{text-align:center;color:#aaa;margin-top:20px;font-size:0.9rem;}
    a{color:#e50914;text-decoration:none;font-weight:500;}
    a:hover{text-decoration:underline;}
    #status{margin-top:15px;text-align:center;color:#ff6666;font-size:0.9rem;min-height:1em;}

    /* ===== WELCOME ===== */
    #welcome{
      position:fixed;inset:0;background:rgba(0,0,0,0.9);
      display:flex;justify-content:center;align-items:center;
      flex-direction:column;color:#fff;font-size:1.5rem;
      z-index:9999;opacity:0;pointer-events:none;transition:opacity 1s;
    }
    #welcome.active{opacity:1;pointer-events:all;}
    #welcome span{
      display:block;margin-top:10px;font-family:'Bebas Neue';
      font-size:3rem;letter-spacing:2px;
      background:linear-gradient(90deg,#e50914,#ff4040);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      animation:glow 3s ease-in-out infinite;
    }

    @keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:none;}}
    @keyframes glow{0%,100%{text-shadow:0 0 20px rgba(229,9,20,0.3);}50%{text-shadow:0 0 30px rgba(229,9,20,0.7);}}
    @media(max-width:480px){.login-container{padding:25px 20px;}.logo{font-size:2rem;}}
  </style>
</head>
<body>
  <canvas id="bg"></canvas>
  <div class="login-container">
    <div class="logo">ü¶ç MORILLALFLIX</div>
    <div class="input-group"><span class="input-icon">üìß</span><input type="email" id="email" placeholder="E-mail" required /></div>
    <div class="input-group"><span class="input-icon">üîí</span><input type="password" id="password" placeholder="Senha" required /></div>
    <button id="signin">Entrar</button>
    <button id="signup">Criar conta</button>
    <button id="google" class="google-btn"><img src="https://www.svgrepo.com/show/475656/google-color.svg" alt="Google"> Entrar com Google</button>
    <p><a href="#" id="reset">Esqueci minha senha</a></p>
    <p id="status"></p>
  </div>

  <div id="welcome">
    <p>Bem-vindo(a) de volta</p>
    <span id="user-name">Cin√©filo</span>
  </div>

  <!-- ===== EFEITO DE PART√çCULAS ===== -->
  <script>
    const canvas=document.getElementById('bg'),ctx=canvas.getContext('2d');
    let particles=[];function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}window.addEventListener('resize',resize);resize();
    class Particle{constructor(){this.x=Math.random()*canvas.width;this.y=Math.random()*canvas.height;this.size=Math.random()*2+0.5;this.speedX=Math.random()*1-0.5;this.speedY=Math.random()*1-0.5;}
      update(){this.x+=this.speedX;this.y+=this.speedY;if(this.x<0||this.x>canvas.width)this.speedX*=-1;if(this.y<0||this.y>canvas.height)this.speedY*=-1;}
      draw(){ctx.beginPath();ctx.arc(this.x,this.y,this.size,0,Math.PI*2);ctx.fillStyle='rgba(229,9,20,'+(0.2+Math.random()*0.6)+')';ctx.fill();}}
    for(let i=0;i<120;i++)particles.push(new Particle());
    function animate(){ctx.clearRect(0,0,canvas.width,canvas.height);particles.forEach(p=>{p.update();p.draw();});requestAnimationFrame(animate);}animate();
  </script>

  <!-- ===== FIREBASE AUTH ===== -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import {
      getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword,
      sendPasswordResetEmail, signInWithPopup, GoogleAuthProvider, onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
    import { firebaseConfig } from './firebase-config.js';

    const app=initializeApp(firebaseConfig);
    const auth=getAuth(app);
    const provider=new GoogleAuthProvider();
    const redirect="index.html";
    const el=id=>document.getElementById(id);
    const showErr=msg=>el('status').textContent=msg;
    const welcome=document.getElementById('welcome'),userName=document.getElementById('user-name');

    async function showWelcome(name){
      userName.textContent=name||'Cin√©filo';
      welcome.classList.add('active');
      await new Promise(r=>setTimeout(r,2000));
      welcome.classList.remove('active');
      setTimeout(()=>location.replace(redirect),500);
    }

    async function handleLogin(promise){
      el('signin').textContent='Entrando...';
      el('signin').disabled=true;
      try{
        const cred=await promise;
        const name=(cred.user.displayName||cred.user.email.split('@')[0]);
        await showWelcome(name);
      }catch(e){showErr(mapError(e));}
      el('signin').textContent='Entrar';el('signin').disabled=false;
    }

    el('signin').addEventListener('click',()=>{
      const email=el('email').value.trim(),password=el('password').value;
      if(!email||!password)return showErr('Preencha e-mail e senha.');
      handleLogin(signInWithEmailAndPassword(auth,email,password));
    });

    el('signup').addEventListener('click',()=>{
      const email=el('email').value.trim(),password=el('password').value;
      if(!email||!password)return showErr('Preencha e-mail e senha.');
      handleLogin(createUserWithEmailAndPassword(auth,email,password));
    });

    el('google').addEventListener('click',()=>{
      handleLogin(signInWithPopup(auth,provider));
    });

    el('reset').addEventListener('click',async e=>{
      e.preventDefault();
      try{
        const email=el('email').value.trim();
        if(!email)return showErr('Digite seu e-mail para recuperar a senha.');
        await sendPasswordResetEmail(auth,email);
        alert('‚úÖ E-mail de recupera√ß√£o enviado!');
      }catch(e){showErr(mapError(e));}
    });

    onAuthStateChanged(auth,user=>{
      if(user){
        const name=user.displayName||user.email.split('@')[0];
        showWelcome(name);
      }
    });

    function mapError(e){
      const code=(e&&e.code)||'';
      const friendly={
        'auth/email-already-in-use':'Este e-mail j√° est√° em uso.',
        'auth/invalid-email':'E-mail inv√°lido.',
        'auth/invalid-credential':'Credenciais inv√°lidas.',
        'auth/missing-password':'Digite sua senha.',
        'auth/weak-password':'Senha fraca (m√≠n. 6 caracteres).',
        'auth/user-not-found':'Usu√°rio n√£o encontrado.',
        'auth/wrong-password':'Senha incorreta.',
        'auth/popup-closed-by-user':'A janela do Google foi fechada.'
      };
      return friendly[code]||'Ops! Algo deu errado. Tente novamente.';
    }
  </script>
</body>
</html>
